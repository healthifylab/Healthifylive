<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="manifest" href="/public/manifest.json">
    <meta name="theme-color" content="#4CAF50">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Healthifylive Lab</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <div class="container" style="width: 100%; max-width: none; margin: 0; padding: 0;">
        <div class="header" style="background-color: #4CAF50; color: #FFFFFF; padding: 10px 0; text-align: center;">
            <img src="/public/logo.png" alt="Healthifylive Lab Logo" class="logo-img" style="max-width: 150px;">
            <nav style="display: inline-block; margin-top: 10px;">
                <a href="/index.html" style="color: #FFFFFF; margin: 0 15px;">Home</a>
                <a href="/booking.html" style="color: #FFFFFF; margin: 0 15px;">Book Test</a>
                <a href="/contact.html" style="color: #FFFFFF; margin: 0 15px;">Contact</a>
            </nav>
        </div>
        <main style="background-color: #f9f9f9; color: #333333; padding: 20px 0;">
            <section id="find-test" style="background-color: #ffffff; border: 1px solid #ddd; border-radius: 5px; padding: 15px; color: #444444; margin: 0 10px;">
                <h2>Find Test <i class="fas fa-vial"></i></h2>
                <input type="text" id="testSearch" placeholder="Search tests..." class="search-input" style="width: 100%; margin-bottom: 10px;">
                <div id="testList" style="display: flex; flex-wrap: wrap; gap: 10px;">
                    <!-- Tests will be populated via JS -->
                </div>
            </section>
            <section id="find-profile" style="background-color: #ffffff; border: 1px solid #ddd; border-radius: 5px; padding: 15px; color: #444444; margin: 20px 10px 0;">
                <h2>Find Profile <i class="fas fa-file-alt"></i></h2>
                <input type="text" id="profileSearch" placeholder="Search profiles..." class="search-input" style="width: 100%; margin-bottom: 10px;">
                <div id="profileList" style="display: flex; flex-wrap: wrap; gap: 10px;">
                    <!-- Profiles will be populated via JS -->
                </div>
            </section>
        </main>
        <footer style="background-color: #333; color: #FFFFFF; padding: 10px; text-align: center; width: 100%;">
            <p>Healthifylive © 2025 | Contact: +91 9503832889 <i class="fas fa-phone"></i> | Email: <a href="mailto:report@healthifylab.com" style="color: #4CAF50;">report@healthifylab.com</a></p>
            <div class="social-media" style="margin-top: 5px;">
                <a href="https://x.com/healthify_lab" target="_blank"><i class="fab fa-x-twitter" style="color: #FFFFFF; margin: 0 5px;"></i></a>
                <a href="https://instagram.com/healthifylab" target="_blank"><i class="fab fa-instagram" style="color: #FFFFFF; margin: 0 5px;"></i></a>
                <a href="https://facebook.com/healthify" target="_blank"><i class="fab fa-facebook-f" style="color: #FFFFFF; margin: 0 5px;"></i></a>
            </div>
        </footer>
        <a href="https://wa.me/919503832889" class="whatsapp-float" style="position: fixed; bottom: 20px; right: 20px;">
            <div style="display: inline-block !important; padding: 8px !important; background-color: #25D366 !important; color: #fff !important; border-radius: 50% !important; font-size: 24px !important; text-align: center !important; width: 40px !important; height: 40px !important; line-height: 24px !important; transition: none !important;"><i class="fab fa-whatsapp"></i></div>
        </a>
    </div>
    <script type="module">
        // Fetch and populate tests
        async function loadTests() {
            try {
                const response = await fetch('/public/tests.json');
                if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
                const tests = await response.json();
                const testList = document.getElementById('testList');
                testList.innerHTML = '';
                tests.forEach(test => {
                    const div = document.createElement('div');
                    div.style = 'background: #f0f0f0; padding: 10px; border-radius: 5px; width: 100%; max-width: 200px;';
                    div.innerHTML = `<strong>${test.Test_Name}</strong><br>
                                     <span style="text-decoration: line-through; color: #888;">MRP: ₹${test.MRP}</span><br>
                                     Offer: ₹${test.Healthify_Offer_Price}`;
                    testList.appendChild(div);
                });
                setupSearch('test', 'testSearch', testList);
            } catch (error) {
                console.error('Error loading tests:', error);
                document.getElementById('testList').innerHTML = '<p>Error loading tests. Check console.</p>';
            }
        }

        // Fetch and populate profiles
        async function loadProfiles() {
            try {
                const response = await fetch('/public/profiles.json');
                if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
                const profiles = await response.json();
                const profileList = document.getElementById('profileList');
                profileList.innerHTML = '';
                profiles.forEach(profile => {
                    const div = document.createElement('div');
                    div.style = 'background: #f0f0f0; padding: 10px; border-radius: 5px; width: 100%; max-width: 200px;';
                    div.innerHTML = `<strong>${profile.Test_Name}</strong><br>
                                     <span style="text-decoration: line-through; color: #888;">MRP: ₹${profile.MRP}</span><br>
                                     Offer: ₹${profile.Healthify_Offer_Price}`;
                    profileList.appendChild(div);
                });
                setupSearch('profile', 'profileSearch', profileList);
            } catch (error) {
                console.error('Error loading profiles:', error);
                document.getElementById('profileList').innerHTML = '<p>Error loading profiles. Check console.</p>';
            }
        }

        // Setup search functionality
        function setupSearch(type, searchId, list) {
            const searchInput = document.getElementById(searchId);
            searchInput.addEventListener('input', () => {
                const searchTerm = searchInput.value.toLowerCase();
                Array.from(list.children).forEach(item => {
                    const text = item.textContent.toLowerCase();
                    item.style.display = text.includes(searchTerm) ? 'block' : 'none';
                });
            });
        }

        // Load data on page load
        window.onload = () => {
            loadTests();
            loadProfiles();
        };
    </script>
    <style>
        .container {
            width: 100%;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .search-input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        main {
            flex: 1;
        }
        @media (min-width: 768px) {
            .container {
                max-width: 100%;
            }
            #find-test, #find-profile {
                margin: 0 15%;
                width: 70%;
            }
            #testList, #profileList {
                justify-content: center;
            }
        }
    </style>
    <script src="/scripts/pwa-register.js"></script>
</body>
</html>
