
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Bookings â€“ Healthify</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="styles/style.css"/>
</head>
<body>

  <!-- ğŸ” Sticky Header -->
  <header class="header">
    <a href="index.html"><img src="assets/logo.png" class="logo" alt="Logo" /></a>
    <h2>ğŸ“‹ My Bookings</h2>
  </header>

  <!-- ğŸ§¾ Booking Details + PDF Download -->
  <main style="padding: 20px">
    <div id="bookingInfo"></div>
    <div id="pdfSection" style="margin-top: 20px;"></div>
    <button id="whatsappShareBtn">ğŸ“² Share via WhatsApp</button>
  </main>

  <script>
    const bookingData = JSON.parse(localStorage.getItem("lastBooking") || "{}");

    if (!bookingData.name) {
      document.getElementById("bookingInfo").innerHTML = "<p>No recent bookings found.</p>";
    } else {
      const testList = (bookingData.tests || [])
        .map(t => `<li>${t} â€“ â‚¹499</li>`)
        .join(""); // Example price, replace with actual dynamic price

      document.getElementById("bookingInfo").innerHTML = `
        <p><strong>ğŸ‘¤ Name:</strong> ${bookingData.name}</p>
        <p><strong>ğŸ“± Mobile:</strong> ${bookingData.mobile}</p>
        <p><strong>ğŸ“§ Email:</strong> ${bookingData.email}</p>
        <p><strong>ğŸ“… Date:</strong> ${bookingData.date}</p>
        <p><strong>ğŸ‚ Age:</strong> ${bookingData.age}, <strong>âš§ Sex:</strong> ${bookingData.sex}</p>
        <p><strong>ğŸ  Address:</strong> ${bookingData.address}, ${bookingData.pincode}, Landmark: ${bookingData.landmark}</p>
        <p><strong>ğŸ§ª Tests Booked:</strong></p>
        <ul>${testList}</ul>
      `;

      // WhatsApp Share Button Logic
      const whatsappMessage = encodeURIComponent(`
        Healthify Booking Confirmation
        ğŸ§ª Tests: ${bookingData.tests.join(", ")}
        ğŸ“± Mobile: ${bookingData.mobile}
        ğŸ§‘â€âš•ï¸ Name: ${bookingData.name}
        ğŸ“§ Email: ${bookingData.email}
        ğŸ  Address: ${bookingData.address}, ${bookingData.pincode}, ${bookingData.landmark}
        ğŸ“… Preferred Date: ${bookingData.date}
        â° Preferred Time: ${bookingData.time}
      `);

      const whatsappShareBtn = document.getElementById("whatsappShareBtn");
      whatsappShareBtn.onclick = function() {
        window.open(`https://wa.me/919503832889?text=${whatsappMessage}`, "_blank");
      };

      // Generate PDF button
      document.getElementById("pdfSection").innerHTML = `
        <button onclick="generateBookingPDF()">ğŸ“„ Download PDF Report</button>
      `;
    }
  </script>

  <script src="scripts/generate-report.js"></script>
</body>
</html>
